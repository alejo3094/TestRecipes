{"remainingRequest":"/home/alejo/Documents/Recipe-vue/cliente-recipe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alejo/Documents/Recipe-vue/cliente-recipe/src/components/List.vue?vue&type=style&index=0&id=264bddce&scoped=true&lang=css&","dependencies":[{"path":"/home/alejo/Documents/Recipe-vue/cliente-recipe/src/components/List.vue","mtime":1557288441820},{"path":"/home/alejo/Documents/Recipe-vue/cliente-recipe/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/alejo/Documents/Recipe-vue/cliente-recipe/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/alejo/Documents/Recipe-vue/cliente-recipe/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/alejo/Documents/Recipe-vue/cliente-recipe/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alejo/Documents/Recipe-vue/cliente-recipe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.margin {\n  margin: 5px;\n}\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n",{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/components","sourcesContent":["\n<template>\n  <div class=\"list margin\" id=\"list\">\n    <b-input-group class=\"margin\" >\n      <b-form-select style=\"max-width:7rem;\" v-model=\"selected\" :options=\"options\"></b-form-select>\n\n      <b-form-input v-model=\"value\" v-if=\"selected == 'ID'\" type=\"number\" min=\"1\" default=\"1\"></b-form-input>\n      <b-form-input v-model=\"value\" v-if=\"selected == 'Name'\"></b-form-input>\n\n      <b-input-group-append>\n        <b-button @click=\"search\" variant=\"outline-secondary\">&#x1f50d;</b-button>\n        <b-button @click=\"getAllRecips\" variant=\"outline-secondary\">List All</b-button>\n      </b-input-group-append>\n    </b-input-group>\n    <b-row md=\"2\" class=\"justify-content-md-center\">\n           \n      <b-col v-for=\"i in numPages\" :key=\"i\" md=\"2\" @click=\"getRecipePage(i)\">\n        <span v-if=\"actualPage==i\" style=\"color: blue;\"><u><b>{{i}}</b></u></span>\n        <span v-if=\"actualPage!=i\" >{{i}}</span>\n      </b-col>\n    </b-row>\n\n    <b-table :items=\"recipes\" :fields=\"fields\" striped class=\"margin\">\n      <template slot=\"edit\" slot-scope=\"row\">\n        <b-button\n          variant=\"primary\"\n          size=\"sm\"\n          @click=\"row.toggleDetails\"\n          class=\"mr-2\"\n        >{{ row.detailsShowing ? 'Hide' : 'Update'}}</b-button>\n      </template>\n      <template slot=\"delete\" slot-scope=\"row\">\n        <b-button\n          variant=\"danger\"\n          size=\"sm\"\n          class=\"mr-2\"\n          @click=\"confirmDelete(row.item.id, row.item.name)\"\n        >{{ row.detailsShowing ? 'delete' : 'Delete'}}</b-button>\n      </template>\n      <template slot=\"row-details\" slot-scope=\"row\">\n        <b-card>\n          <b-container md=\"6\">\n            <b-card>\n              <b-form ref=\"form\">\n                <b-row class=\"justify-content-md-center\">\n                  <b-form-group id=\"input-group-1\" label=\"Name:\" label-for=\"input-1\">\n                    <b-form-input\n                      id=\"input-1\"\n                      v-model=\"row.item.name\"\n                      required\n                      placeholder=\"Enter recipe name\"\n                    ></b-form-input>\n                  </b-form-group>\n                </b-row>\n                <b-row class=\"justify-content-md-center\">\n                  <b-form-group id=\"input-group-2\" label=\"Ingredients:\" label-for=\"input-2\">\n                    <b-form-input\n                      id=\"input-2\"\n                      v-model=\"row.item.ingredients\"\n                      required\n                      placeholder=\"Enter ingredients\"\n                    ></b-form-input>\n                  </b-form-group>\n                </b-row>\n                <b-row class=\"justify-content-md-center\">\n                  <b-form-group id=\"input-group-3\" label=\"Preparation:\" label-for=\"input-3\">\n                    <b-form-input\n                      id=\"input-3\"\n                      v-model=\"row.item.preparation\"\n                      required\n                      placeholder=\"Enter preparation\"\n                    ></b-form-input>\n                  </b-form-group>\n                </b-row>\n                <b-row class=\"justify-content-md-center\">\n                  <b-form-group id=\"input-group-4\" label=\"Time:\" label-for=\"input-4\">\n                    <b-form-input\n                      id=\"input-4\"\n                      type=\"number\"\n                      min=\"0\"\n                      default=\"0\"\n                      v-model=\"row.item.time\"\n                      required\n                      placeholder=\"Enter time\"\n                    ></b-form-input>\n                  </b-form-group>\n                </b-row>\n                <b-row md=\"4\" class=\"justify-content-md-center\">\n                  <b-col md=\"2\">\n                    <b-button\n                      variant=\"danger\"\n                      @click=\"updateRecipe(row.item.id,row.item.name,row.item.ingredients,row.item.preparation,row.item.time)\"\n                    >Save</b-button>\n                  </b-col>\n                  <b-col md=\"2\">\n                    <b-button variant=\"primary\" @click=\"row.toggleDetails\">Hide</b-button>\n                  </b-col>\n                </b-row>\n              </b-form>\n            </b-card>\n          </b-container>\n        </b-card>\n      </template>\n    </b-table>\n    <b-modal ref=\"my-modal\" hide-footer id=\"modal-1\" title=\"Delete recipe\">\n      <p class=\"my-4\">Are you sure delete {{tempName}}?</p>\n      <b-button class=\"mt-3\" variant=\"outline-primary\" block @click=\"hideModal\">Cancel</b-button>\n      <b-button class=\"mt-2\" variant=\"outline-danger\" block @click=\"deleteRecipe\">Delete</b-button>\n    </b-modal>\n    <b-modal ref=\"my-modal-success\" id=\"modal-2\" title=\"Success\">\n      <b-alert variant=\"success\" show>\n        <p class=\"my-4\">{{message}}</p>\n      </b-alert>\n    </b-modal>\n    <b-modal ref=\"my-modal-failed\" id=\"modal-3\" title=\"Failed\">\n      <b-alert variant=\"danger\" show>\n        <p class=\"my-4\">{{message}}</p>\n      </b-alert>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      numRegPerPages:10,\n      numRgs: 0,\n      actualPage:1,\n      numPages:0,\n      value: \"\",\n      message: \"\",\n      selected: \"Name\",\n      options: [\"ID\", \"Name\"],\n      tempName: \"\",\n      tempId: 0,\n      fields: [\n        \"id\",\n        \"name\",\n        \"ingredients\",\n        \"preparation\",\n        \"time\",\n        \"edit\",\n        \"delete\"\n      ],\n      recipes: [],\n      hola: \"hola munndo!!\",\n      time: 0,\n      form: {\n        name: \"\",\n        ingredients: \"\",\n        preparation: \"\",\n        time: 0\n      },\n      back: 11,\n      next: 20,\n    };\n  },\n  beforeCreate() {},\n\n  created() {\n    this.getCount()\n    \n    //console.log(\"Recipes: \", this.recipes)\n    this.getAllRecips();\n  },\n\n  methods: {\n    getRecipePage(i){\n      this.actualPage = i;\n      let context = this;\n      \n      axios({\n          url: \"http://localhost:8090/api/recipe/?count=\"+this.numRegPerPages+\" &start=\"+((i-1)*this.numRegPerPages),\n          method: \"GET\"\n        })\n          .then(function(response) {\n            context.recipes = response.data;\n          })\n          .catch(function(error) {\n            console.log(\"Error get count\")\n          });\n      \n    },\n    getCount(){\n      let context = this;\n      axios({\n          url: \"http://localhost:8090/api/recipe/count/\",\n          method: \"GET\"\n        })\n          .then(function(response) {\n            console.log(\"Get countasas\", response.data.count)\n            context.numRgs = response.data.count;\n            context.numPages = Math.ceil(context.numRgs/context.numRegPerPages)\n          })\n          .catch(function(error) {\n            console.log(\"Error get count\")\n          });\n\n    },\n    search() {\n      let context = this;\n\n      if (this.value) {\n        axios({\n          url: \"http://localhost:8090/api/recipe/\" + this.value.toLowerCase(),\n          method: \"GET\"\n        })\n          .then(function(response) {\n            context.recipes = response.data;\n          })\n          .catch(function(error) {\n            context.message = \"Recipe not found.\"\n            context.showModal(\"my-modal-failed\");\n            contexto.callBack();\n          });\n      } else {\n        context.message = \"Insert search values\"\n        context.showModal(\"my-modal-failed\");\n      }\n    },\n\n    hideModal() {\n      this.$refs[\"my-modal\"].hide();\n      this.tempName = \"\";\n      this.tempId = 0;\n    },\n    showModal(nameModal) {\n      this.$refs[nameModal].show();\n    },\n    confirmDelete(id, name) {\n      this.tempName = name;\n      this.tempId = id;\n\n      this.$refs[\"my-modal\"].show();\n    },\n\n    callBack() {\n      this.hideModal();\n      this.getAllRecips();\n    },\n    updateRecipe(id, name, ingredients, preparation, time) {\n      let context = this;\n      let recipe = {\n        name: name,\n        ingredients: ingredients,\n        preparation: preparation,\n        time: time\n      };\n      axios({\n        headers: {\n          \"Access-Control-Allow-Headers\":\n            \"Accept, Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token\",\n          \"Access-Control-Allow-Methods\": \"POST, GET, PUT, DELETE\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Content-Type\": \"application/json\"\n        },\n        url: \"http://localhost:8090/api/recipe/\" + id,\n        method: \"PUT\",\n        data: recipe\n      })\n        .then(function(response) {\n          context.message = \"The edition of the recipe was success.\"\n          context.showModal(\"my-modal-success\");\n          context.callBack();\n          context.hideModal();\n          console.log(response);\n        })\n        .catch(function(error) {\n          context.message = \"The edition of the recipe failed.\"\n          context.showModal(\"my-modal-failed\");\n          context.callBack();\n          console.log(error);\n        });\n    },\n    deleteRecipe() {\n      let context = this;\n      axios({\n        headers: {\n          \"Access-Control-Allow-Headers\":\n            \"Accept, Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token\",\n          \"Access-Control-Allow-Methods\": \"POST, GET, PUT, DELETE\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Content-Type\": \"application/json\"\n        },\n        url: \"http://localhost:8090/api/recipe/\" + this.tempId,\n        method: \"DELETE\"\n      })\n        .then(function(response) {\n          context.callBack();\n        })\n        .catch(function(error) {\n          console.log(error);\n        });\n    },\n    getAllRecips() {\n      let currentObject = this;\n      axios({\n        url: \"http://localhost:8090/api/recipe/\",\n        method: \"GET\"\n      })\n        .then(function(response) {\n          currentObject.recipes = response.data;\n          console.log(response);\n        })\n        .catch(function(error) {\n          console.log(error);\n        });\n\n      console.log(\"resultadoooo\", this.recipes);\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.margin {\n  margin: 5px;\n}\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n"]}]}